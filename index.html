<!DOCTYPE html>
<html lang="th">
<head>
   <meta charset="UTF-8" />
   <meta name="viewport" content="width=device-width, initial-scale=1.0" />
   <title>Personal AI Dashboard</title>
   <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üí°</text></svg>">
   <style>
       @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;700&display=swap');
       :root { 
           --dark-bg: #0d1117; 
           --medium-bg: #161b22; 
           --light-bg: #1c2128; 
           --border-color: #30363d; 
           --text-primary: #c9d1d9; 
           --text-secondary: #8b949e; 
           --accent-blue: #58a6ff; 
           --accent-green: #238636; 
           --accent-red: #da3633; 
           --accent-orange: #f0883e;
           --accent-purple: #a371f7;
       }
       body { font-family: 'Sarabun', sans-serif; background-color: var(--dark-bg); color: var(--text-primary); margin: 0; padding: 20px; }
       .container { width: 100%; max-width: 900px; margin: auto; }
       .header { text-align: center; padding: 20px 0; position: relative; }
       .header h1 { margin: 0; font-size: 28px; }
       
       /* üîÅ Auto-refresh indicator */
       .auto-refresh-indicator {
           position: absolute;
           top: 20px;
           right: 0;
           display: flex;
           align-items: center;
           gap: 8px;
           font-size: 12px;
           color: var(--text-secondary);
           background-color: var(--medium-bg);
           padding: 6px 12px;
           border-radius: 6px;
           border: 1px solid var(--border-color);
       }
       .refresh-dot {
           width: 8px;
           height: 8px;
           background-color: var(--accent-green);
           border-radius: 50%;
           animation: pulse 2s infinite;
       }
       @keyframes pulse {
           0% { opacity: 1; }
           50% { opacity: 0.5; }
           100% { opacity: 1; }
       }
       
       .wallet-info { display: flex; justify-content: space-between; align-items: center; padding: 15px; background-color: var(--medium-bg); border: 1px solid var(--border-color); border-radius: 8px; margin-bottom: 20px; flex-wrap: wrap; }
       .wallet-details { display: flex; align-items: center; gap: 10px; }
       #walletAddress { font-family: monospace; }
       #networkName { background-color: var(--border-color); padding: 4px 8px; border-radius: 6px; font-size: 12px; font-weight: 700; border: 1px solid #4d545e; }
       #connectButton { background-color: var(--accent-green); color: white; border: none; padding: 10px 18px; border-radius: 6px; cursor: pointer; font-weight: 700; transition: background-color 0.2s; margin-top: 10px; width: 100%; }
       #connectButton:hover { background-color: #2ea043; }
       @media (min-width: 600px) { #connectButton { width: auto; margin-top: 0; } }
       
       .section { background-color: var(--medium-bg); border: 1px solid var(--border-color); border-radius: 8px; margin-bottom: 20px; overflow: hidden; }
       .section-header { padding: 15px 20px; background-color: var(--light-bg); border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; }
       .section-header h2 { margin: 0; font-size: 20px; }
       .section-content { padding: 20px; }
       
       /* üîÑ Cache indicator */
       .cache-indicator {
           font-size: 11px;
           padding: 3px 8px;
           border-radius: 4px;
           background-color: rgba(88, 166, 255, 0.2);
           color: var(--accent-blue);
           border: 1px solid rgba(88, 166, 255, 0.3);
       }
       .cache-indicator.cached {
           background-color: rgba(35, 134, 54, 0.2);
           color: var(--accent-green);
           border-color: rgba(35, 134, 54, 0.3);
       }
       
       .loading-state, .error-state { text-align: center; color: var(--text-secondary); padding: 40px 20px; }
       .loader { border: 4px solid var(--border-color); border-top: 4px solid var(--accent-blue); border-radius: 50%; width: 30px; height: 30px; animation: spin 1s linear infinite; margin: 0 auto 15px auto; }
       @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
       
       .token-list { list-style-type: none; padding: 0; margin: 0; }
       .token-item { display: flex; align-items: center; padding: 12px 0; border-bottom: 1px solid var(--border-color); }
       .token-item:last-child { border-bottom: none; }
       .token-icon { width: 36px; height: 36px; margin-right: 15px; border-radius: 50%; background-color: var(--dark-bg);}
       .token-info { flex-grow: 1; }
       .token-symbol { font-weight: 700; }
       .token-name { font-size: 12px; color: var(--text-secondary); }
       .token-balance { text-align: right; font-weight: 700; font-size: 1.1em; }
       .token-value { font-size: 12px; color: var(--text-secondary); text-align: right; }
       
       /* üìä Chart container */
       .chart-container {
           margin-top: 20px;
           background-color: var(--dark-bg);
           border: 1px solid var(--border-color);
           border-radius: 6px;
           padding: 15px;
           height: 200px;
           position: relative;
       }
       .chart-loading {
           position: absolute;
           top: 50%;
           left: 50%;
           transform: translate(-50%, -50%);
           color: var(--text-secondary);
       }
       .price-chart {
           width: 100%;
           height: 100%;
       }
       
       .ai-analysis-container { margin-top: 20px; border-top: 1px solid var(--border-color); padding-top: 20px; }
       .ai-analysis-item { padding: 15px; background-color: rgba(88, 166, 255, 0.1); border-left: 3px solid var(--accent-blue); border-radius: 0 6px 6px 0; margin-bottom: 10px; }
       .ai-analysis-item.quota-error { background-color: rgba(240, 136, 62, 0.1); border-left-color: var(--accent-orange); }
       .ai-analysis-item.portfolio-health { background-color: rgba(163, 113, 247, 0.1); border-left-color: var(--accent-purple); }
       .ai-analysis-item:last-child { margin-bottom: 0; }
       .ai-title { font-weight: 700; color: var(--accent-blue); display: block; margin-bottom: 5px; font-size: 14px; }
       .quota-error .ai-title { color: var(--accent-orange); }
       .portfolio-health .ai-title { color: var(--accent-purple); }
       .ai-content { margin: 0; line-height: 1.6; }
       .ai-value { font-weight: 700; color: var(--text-primary); font-size: 1.2em; }
       
       /* üÜï Features panel */
       .features-panel {
           display: flex;
           gap: 10px;
           padding: 10px;
           background-color: var(--light-bg);
           border: 1px solid var(--border-color);
           border-radius: 6px;
           margin-bottom: 20px;
           flex-wrap: wrap;
           font-size: 12px;
       }
       .feature-badge {
           display: flex;
           align-items: center;
           gap: 5px;
           padding: 4px 10px;
           background-color: var(--medium-bg);
           border: 1px solid var(--border-color);
           border-radius: 4px;
           color: var(--text-secondary);
       }
       .feature-badge.active {
           border-color: var(--accent-green);
           color: var(--accent-green);
       }
       .feature-icon {
           font-size: 14px;
       }
       
       .status-panel { display: flex; justify-content: space-between; flex-wrap: wrap; padding: 10px; margin-top: 20px; font-size: 12px; color: var(--text-secondary); }
       .status-item { display: flex; align-items: center; gap: 6px; margin-bottom: 5px; width: 50%; justify-content: flex-start; }
       @media (min-width: 600px) { .status-item { width: auto; } }
       
       .debug-log-container { margin-top: 20px; background-color: var(--medium-bg); border: 1px solid var(--border-color); border-radius: 8px; font-family: monospace; font-size: 12px; }
       .debug-log-header { padding: 10px 15px; background-color: var(--light-bg); border-bottom: 1px solid var(--border-color); font-weight: 700; display: flex; justify-content: space-between; align-items: center; }
       .debug-log-content { padding: 15px; height: 200px; overflow-y: auto; background-color: var(--dark-bg); color: var(--text-secondary); }
       .log-entry { margin-bottom: 5px; word-break: break-all; }
       .log-success { color: #3fb950; }
       .log-error { color: #f85149; }
       .log-info { color: #a371f7; }
       .log-warning { color: #f0883e; }
       .clear-log-btn {
           font-size: 11px;
           background-color: var(--accent-red);
           color: white;
           border: none;
           padding: 4px 10px;
           border-radius: 4px;
           cursor: pointer;
       }
       .clear-log-btn:hover { background-color: #f85149; }
   </style>
</head>
<body>
   <div class="container">
       <header class="header">
           <h1>Personal AI Dashboard</h1>
           <div class="auto-refresh-indicator" title="Auto Refresh Active">
               <div class="refresh-dot"></div>
               <div>‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</div>
           </div>
       </header>
       
       <section class="wallet-info">
           <div class="wallet-details">
               <div>Wallet: <span id="walletAddress">-</span></div>
               <div id="networkName">-</div>
           </div>
           <button id="connectButton">‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Wallet</button>
       </section>

       <section class="section">
           <div class="section-header">
               <h2>Tokens</h2>
               <span class="cache-indicator" id="tokensCacheIndicator">‡∏™‡∏î‡πÉ‡∏´‡∏°‡πà</span>
           </div>
           <div class="section-content">
               <ul class="token-list" id="tokenList">
                   <!-- token items will be inserted here -->
               </ul>
           </div>
       </section>

       <section class="section">
           <div class="section-header">
               <h2>‡∏£‡∏≤‡∏Ñ‡∏≤‡πÅ‡∏•‡∏∞‡∏Å‡∏£‡∏≤‡∏ü</h2>
           </div>
           <div class="section-content">
               <div class="chart-container" id="priceChartContainer">
                   <div class="chart-loading" id="chartLoading">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Å‡∏£‡∏≤‡∏ü...</div>
                   <canvas id="priceChart" class="price-chart"></canvas>
               </div>
           </div>
       </section>

       <section class="ai-analysis-container" id="aiAnalysis">
           <!-- AI analysis items will be inserted here dynamically -->
       </section>

       <section class="features-panel" id="featuresPanel">
           <div class="feature-badge active"><span class="feature-icon">‚ö°</span> ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå AI</div>
           <div class="feature-badge"><span class="feature-icon">üîí</span> ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢</div>
           <div class="feature-badge"><span class="feature-icon">üìà</span> ‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÄ‡∏ä‡∏¥‡∏á‡∏•‡∏∂‡∏Å</div>
       </section>

       <div class="status-panel" id="statusPanel">
           <div class="status-item">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå: <span id="serverStatus">‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</span></div>
           <div class="status-item">‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î: <span id="lastUpdateTime">-</span></div>
       </div>

       <div class="debug-log-container">
           <div class="debug-log-header">
               <span>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏∞‡∏ö‡∏ö (Debug Log)</span>
               <button class="clear-log-btn" id="clearLogBtn">‡∏•‡πâ‡∏≤‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
           </div>
           <div class="debug-log-content" id="debugLogContent">
               <!-- Log entries appear here -->
           </div>
       </div>
   </div>

   <script>
       // ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Wallet ‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô)
       const walletAddressEl = document.getElementById('walletAddress');
       const networkNameEl = document.getElementById('networkName');
       const connectButton = document.getElementById('connectButton');
       const tokenListEl = document.getElementById('tokenList');
       const tokensCacheIndicator = document.getElementById('tokensCacheIndicator');
       const debugLogContent = document.getElementById('debugLogContent');
       const clearLogBtn = document.getElementById('clearLogBtn');
       const lastUpdateTimeEl = document.getElementById('lastUpdateTime');
       const serverStatusEl = document.getElementById('serverStatus');
       const aiAnalysisEl = document.getElementById('aiAnalysis');
       const chartLoadingEl = document.getElementById('chartLoading');
       const priceChartCanvas = document.getElementById('priceChart');
       let priceChartCtx = priceChartCanvas.getContext('2d');

       function log(message, type='info') {
           const entry = document.createElement('div');
           entry.className = 'log-entry log-' + type;
           entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
           debugLogContent.appendChild(entry);
           debugLogContent.scrollTop = debugLogContent.scrollHeight;
       }

       clearLogBtn.onclick = () => {
           debugLogContent.innerHTML = '';
           log('‡∏•‡πâ‡∏≤‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢', 'success');
       };

       connectButton.onclick = async () => {
           // ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏°‡∏°‡∏ï‡∏¥‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ wallet (‡∏à‡∏£‡∏¥‡∏á ‡πÜ ‡πÉ‡∏ä‡πâ Web3, ethers, etc.)
           try {
               // ‡∏™‡∏°‡∏°‡∏ï‡∏¥‡πÑ‡∏î‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• wallet
               const walletAddress = '0x1234...abcd';
               const networkName = 'Ethereum Mainnet';
               walletAddressEl.textContent = walletAddress;
               networkNameEl.textContent = networkName;
               log(`‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Wallet: ${walletAddress}`, 'success');
               connectButton.disabled = true;
               connectButton.textContent = '‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÅ‡∏•‡πâ‡∏ß';
               loadTokens();
           } catch (error) {
               log('‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Wallet ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß: ' + error.message, 'error');
           }
       };

       function loadTokens() {
           tokensCacheIndicator.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...';
           tokensCacheIndicator.classList.remove('cached');
           // ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• token
           const tokens = [
               { symbol: 'ETH', name: 'Ethereum', balance: 1.234, valueUsd: 4000 },
               { symbol: 'USDT', name: 'Tether', balance: 1500, valueUsd: 1500 },
               { symbol: 'BTC', name: 'Bitcoin', balance: 0.05, valueUsd: 2700 }
           ];
           tokenListEl.innerHTML = '';
           tokens.forEach(token => {
               const li = document.createElement('li');
               li.className = 'token-item';
               li.innerHTML = `
                   <div class="token-icon" title="${token.name}">${token.symbol[0]}</div>
                   <div class="token-info">
                       <div class="token-symbol">${token.symbol}</div>
                       <div class="token-name">${token.name}</div>
                   </div>
                   <div>
                       <div class="token-balance">${token.balance}</div>
                       <div class="token-value">$${token.valueUsd.toFixed(2)}</div>
                   </div>
               `;
               tokenListEl.appendChild(li);
           });
           tokensCacheIndicator.textContent = '‡∏™‡∏î‡πÉ‡∏´‡∏°‡πà';
           tokensCacheIndicator.classList.add('cached');
           log('‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• Token ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', 'success');
           updateLastUpdateTime();
           loadPriceChart();
           loadAIAnalysis();
       }

       function updateLastUpdateTime() {
           const now = new Date();
           lastUpdateTimeEl.textContent = now.toLocaleTimeString();
       }

       function loadPriceChart() {
           // ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏£‡∏≤‡∏ü‡∏á‡πà‡∏≤‡∏¢ ‡πÜ ‡∏î‡πâ‡∏ß‡∏¢ Canvas API (‡∏à‡∏£‡∏¥‡∏á ‡πÜ ‡πÉ‡∏ä‡πâ Chart.js ‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏∑‡πà‡∏ô ‡πÜ)
           chartLoadingEl.style.display = 'none';
           priceChartCanvas.style.display = 'block';

           // ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ß‡∏≤‡∏î‡∏Å‡∏£‡∏≤‡∏ü‡πÄ‡∏™‡πâ‡∏ô‡∏á‡πà‡∏≤‡∏¢ ‡πÜ
           const ctx = priceChartCtx;
           const w = priceChartCanvas.width = priceChartCanvas.clientWidth;
           const h = priceChartCanvas.height = priceChartCanvas.clientHeight;

           ctx.clearRect(0, 0, w, h);
           ctx.strokeStyle = '#58a6ff';
           ctx.lineWidth = 2;
           ctx.beginPath();
           const points = [2000, 2500, 2300, 2700, 3000, 3200, 3100];
           const max = Math.max(...points);
           const min = Math.min(...points);
           points.forEach((p, i) => {
               const x = (i / (points.length - 1)) * w;
               const y = h - ((p - min) / (max - min)) * h;
               if (i === 0) ctx.moveTo(x, y);
               else ctx.lineTo(x, y);
           });
           ctx.stroke();
       }

       function loadAIAnalysis() {
           aiAnalysisEl.innerHTML = '';
           // ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• AI ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå
           const aiData = [
               { title: '‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏û‡∏≠‡∏£‡πå‡∏ï‡πÇ‡∏ü‡∏•‡∏¥‡πÇ‡∏≠', content: '‡∏û‡∏≠‡∏£‡πå‡∏ï‡πÇ‡∏ü‡∏•‡∏¥‡πÇ‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏î‡∏µ üéâ', type: 'portfolio-health' },
               { title: '‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô', content: '‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏Å‡∏•‡πâ‡∏ñ‡∏∂‡∏á‡πÇ‡∏Ñ‡∏ß‡∏ï‡πâ‡∏≤‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô AI ‡πÅ‡∏•‡πâ‡∏ß ‡πÇ‡∏õ‡∏£‡∏î‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö', type: 'quota-error' },
               { title: '‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ AI', content: '‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡πÉ‡∏ô‡πÄ‡∏´‡∏£‡∏µ‡∏¢‡∏ç ETH ‡πÅ‡∏•‡∏∞ BTC ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á', type: '' }
           ];
           aiData.forEach(item => {
               const div = document.createElement('div');
               div.className = 'ai-analysis-item ' + (item.type || '');
               div.innerHTML = `<span class="ai-title">${item.title}</span><p class="ai-content">${item.content}</p>`;
               aiAnalysisEl.appendChild(div);
           });
       }

       // Auto refresh ‡∏ó‡∏∏‡∏Å 60 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
       setInterval(() => {
           if (!connectButton.disabled) return; // ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ wallet ‡πÑ‡∏°‡πà‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä
           log('‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥...');
           loadTokens();
           serverStatusEl.textContent = '‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå';
       }, 60000);
   </script>
</body>
</html>
